{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a216bbb9838d88e68002","webpack:///./src/index.ts","webpack:///./src/utils/actionHelpers.ts","webpack:///./src/utils/asyncMiddleware.ts","webpack:///./src/utils/promiseHelpers.ts","webpack:///./src/utils/reducerBuilder.ts","webpack:///./src/utils/storeBuilder.ts","webpack:///external \"redux\"","webpack:///external \"ts-helpers\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"redux\"), require(\"ts-helpers\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ReduxTs\", [\"redux\", \"ts-helpers\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxTs\"] = factory(require(\"redux\"), require(\"ts-helpers\"));\n\telse\n\t\troot[\"ReduxTs\"] = factory(root[\"redux\"], root[\"ts-helpers\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a216bbb9838d88e68002\n **/","export * from \"./utils/actionHelpers\"\r\nexport * from \"./utils/reducerBuilder\"\r\nexport * from \"./utils/storeBuilder\"\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.ts\n **/","import 'ts-helpers'\r\nimport \"./promiseHelpers\"\r\n\r\n\r\nexport type NullableDispatch = Redux.Dispatch<any> | void;\r\n\r\nexport abstract class SyncAction implements Redux.Action {\r\n    type: string;\r\n}\r\n\r\nexport abstract class AsyncAction extends SyncAction implements Promise<NullableDispatch>{\r\n\r\n    private promise: Promise<Redux.Dispatch<any>>\r\n\r\n    then(onfulfilled?: (value: Redux.Dispatch<any>) => NullableDispatch | PromiseLike<NullableDispatch>, onrejected?: (reason: any) => void): Promise<NullableDispatch> {\r\n        return this.promise.then(onfulfilled, onrejected);\r\n    }\r\n\r\n    catch(onrejected?: (reason: any) => NullableDispatch | PromiseLike<NullableDispatch>): Promise<NullableDispatch> {\r\n        return this.promise.catch(onrejected);\r\n    }\r\n\r\n    finally(onfulfilled?: (value?: NullableDispatch, isSuccess?: boolean) => any | PromiseLike<NullableDispatch>): Promise<NullableDispatch> {\r\n        return this.promise.finally(onfulfilled);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/actionHelpers.ts\n **/","import { SyncAction, AsyncAction } from './actionHelpers'\r\n\r\n\r\nconst isSyncAction = (action: Redux.Action): action is any => {\r\n    return action instanceof SyncAction;\r\n}\r\n\r\nconst isAsyncAction = (action: Redux.Action): action is any => {\r\n    return action instanceof AsyncAction;\r\n}\r\n\r\nconst mergeObject = (action: any): any => {\r\n    let merged: any = {};\r\n    for (var key in action) {\r\n        if (key !== 'constructor') {\r\n            merged[key] = (<any>action)[key];\r\n        }\r\n    }\r\n    return merged;\r\n}\r\n\r\nexport const asyncMiddleware = <S>(store: Redux.MiddlewareAPI<S>) => (next: Redux.Dispatch<S>): Redux.Dispatch<S> => (action: Redux.Action) => {\r\n    if (isSyncAction(action)) {\r\n        action.type = action.constructor.name;\r\n\r\n        if (isAsyncAction(action)) {\r\n            action.promise = new Promise<Redux.Dispatch<any>>((resolve, reject) => {\r\n                //After original dispatch lifecycle, resolve dispatch in order to handle async operations\r\n                setTimeout(() => {\r\n                    resolve(store.dispatch);\r\n                });\r\n            });\r\n        }\r\n\r\n        //Fix: Actions must be plain objects.\r\n        let merged = mergeObject(action);\r\n\r\n        //Change state immediately and register async operations\r\n        return next(merged);\r\n    }\r\n\r\n    return next(action);\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/asyncMiddleware.ts\n **/","interface Promise<T> {\r\n    finally<TResult>(onfulfilled?: (value?: T, isSuccess?: boolean) => TResult | PromiseLike<TResult>): Promise<TResult>;\r\n}\r\n\r\nPromise.prototype['finally'] = function finallyPolyfill<TResult>(callback: (value?: any, isSuccess?: boolean) => TResult | PromiseLike<TResult>) {\r\n    var constructor = this.constructor;\r\n\r\n    return this.then(function (value: any) {\r\n        return constructor.resolve(callback(value, true)).then(function () {\r\n            return value;\r\n        });\r\n    }, function (reason: any) {\r\n        return constructor.resolve(callback(reason, false)).then(function () {\r\n            throw reason;\r\n        });\r\n    });\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/promiseHelpers.ts\n **/","import { SyncAction, AsyncAction } from '../utils/actionHelpers'\r\n\r\n\r\nexport interface IAction<T extends Redux.Action> {\r\n    prototype: T;\r\n}\r\n\r\nexport type Reducer<State, ActionType extends SyncAction> = (state: State, action: ActionType) => State;\r\n\r\nexport class ReducerBuilder<State> {\r\n\r\n    private actions: { [type: string]: Reducer<State, SyncAction> } = {};\r\n    private initState: State;\r\n\r\n    public init(state: State) {\r\n        this.initState = state;\r\n        return this;\r\n    }\r\n\r\n    public handle<T extends SyncAction>(actionType: IAction<T>, actionBody: Reducer<State, T>) {\r\n        this.actions[(<any>actionType).name] = actionBody;\r\n        return this;\r\n    }\r\n\r\n    public build() {\r\n        return (state: State = this.initState, action: SyncAction): State => {\r\n            let type = action.type;\r\n            let actionBody = this.actions[type];\r\n\r\n            if (!!actionBody) {\r\n                return actionBody(state, action);\r\n            }\r\n\r\n            return state;\r\n        }\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/reducerBuilder.ts\n **/","import { combineReducers, createStore, applyMiddleware, compose } from 'redux';\r\nimport { asyncMiddleware } from '../utils/asyncMiddleware'\r\n\r\n\r\nexport class StoreBuilder<StoreType> {\r\n\r\n    private middlewares: Redux.Middleware[];\r\n    private reducers: Redux.ReducersMapObject;\r\n    private initialState: StoreType;\r\n    private enhancer: Redux.GenericStoreEnhancer;\r\n\r\n    constructor() {\r\n        this.middlewares = [asyncMiddleware];\r\n        this.reducers = {};\r\n        this.initialState = {} as StoreType;\r\n        this.enhancer = (f: Redux.StoreCreator) => f;\r\n    }\r\n\r\n    public withMiddleware(middleware: Redux.Middleware) {\r\n        this.middlewares.push(middleware);\r\n        return this;\r\n    }\r\n\r\n    public withInitialState(state: StoreType) {\r\n        this.initialState = state;\r\n        return this;\r\n    }\r\n\r\n    public withReducer<S>(name: string, reducer: Redux.Reducer<S>) {\r\n        this.reducers[name] = reducer;\r\n        return this;\r\n    }\r\n\r\n    public withReducersMap(reducers: Redux.ReducersMapObject) {\r\n        for (let reducer in reducers) {\r\n            this.reducers[reducer] = reducers[reducer];\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public withEnhancer(enhancer: Redux.GenericStoreEnhancer) {\r\n        let preEnhancer = this.enhancer;\r\n        this.enhancer = (f: Redux.StoreCreator) => enhancer(preEnhancer(f));\r\n        return this;\r\n    }\r\n\r\n\r\n    public build() {\r\n        let middlewares = applyMiddleware(...this.middlewares);\r\n        let reducers = combineReducers(this.reducers);\r\n        let composer = compose(middlewares, this.enhancer)(createStore);\r\n        let store = composer(reducers, this.initialState);\r\n\r\n        return store as Redux.Store<StoreType>;\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/storeBuilder.ts\n **/","module.exports = require(\"redux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"ts-helpers\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ts-helpers\"\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}